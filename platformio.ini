[platformio]
default_envs = m5papers3

; Development environment (with debug logging)
[env:m5papers3]
platform = espressif32
board = esp32-s3-devkitm-1
framework = arduino

; M5Paper S3 specific settings
board_build.partitions = default_16MB.csv
board_upload.flash_size = 16MB
board_upload.maximum_size = 16777216
board_build.arduino.memory_type = qio_opi

build_flags =
    -DESP32S3
    -DBOARD_HAS_PSRAM
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DDEBUG

lib_deps =
    m5stack/M5Unified@^0.2.5
    m5stack/M5GFX@^0.2.7

extra_scripts = pre:tools/icons/convert_icons.py

monitor_speed = 115200
upload_speed = 921600

; Release environment (no debug logging)
[env:m5papers3_release]
platform = espressif32
board = esp32-s3-devkitm-1
framework = arduino

board_build.partitions = default_16MB.csv
board_upload.flash_size = 16MB
board_upload.maximum_size = 16777216
board_build.arduino.memory_type = qio_opi

build_flags =
    -DESP32S3
    -DBOARD_HAS_PSRAM
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1

lib_deps =
    m5stack/M5Unified@^0.2.5
    m5stack/M5GFX@^0.2.7

extra_scripts = pre:tools/icons/convert_icons.py

monitor_speed = 115200
upload_speed = 921600

; Native unit tests (runs on host machine)
[env:native]
platform = native
build_flags =
    -DNATIVE_TEST
    -I src
test_build_src = false
src_filter = -<*>